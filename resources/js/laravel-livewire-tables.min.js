document.addEventListener('alpine:init',()=>{Alpine.data('tableWrapper',(wire,showBulkActionsAlpine)=>({listeners:[],childElementOpen:!1,filtersOpen:wire.entangle('filterSlideDownDefaultVisible'),paginationCurrentCount:wire.entangle('paginationCurrentCount'),paginationTotalItemCount:wire.entangle('paginationTotalItemCount'),paginationCurrentItems:wire.entangle('paginationCurrentItems'),selectedItems:wire.entangle('selected'),selectAllStatus:wire.entangle('selectAll'),delaySelectAll:wire.entangle('delaySelectAll'),hideBulkActionsWhenEmpty:wire.entangle('hideBulkActionsWhenEmpty'),toggleSelectAll(){if(!showBulkActionsAlpine)return;if(this.paginationTotalItemCount===this.selectedItems.length){this.clearSelected();this.selectAllStatus=!1}else this.delaySelectAll?this.setAllItemsSelected():this.setAllSelected()},setAllItemsSelected(){if(!showBulkActionsAlpine)return;this.selectAllStatus=!0;this.selectAllOnPage()},setAllSelected(){if(!showBulkActionsAlpine)return;this.delaySelectAll?(this.selectAllStatus=!0,this.selectAllOnPage()):(wire.setAllSelected())},clearSelected(){if(!showBulkActionsAlpine)return;this.selectAllStatus=!1;wire.clearSelected()},selectAllOnPage(){if(!showBulkActionsAlpine)return;let a=this.selectedItems;var b=this.paginationCurrentItems.values();for(const A of b)a.push(`${A}`);this.selectedItems=[...new Set(a)]},destroy(){for(const _ of this.listeners)_()}}));Alpine.data('booleanFilter',(B,c,C,d)=>({switchOn:!1,value:B.entangle(`filterComponents.${c}`).live,init(){this.switchOn=!1;this.value!==void 0&&(this.switchOn=!!+this.value);this.listeners.push(Livewire.on('filter-was-reset',_a=>{(_a.tableName==C&&_a.filterKey==c)&&(this.switchOn=d)}))}}));Alpine.data('numberRangeFilter',(D,_b,_c,_d,e)=>({allFilters:D.entangle('filterComponents',!1),originalMin:0,originalMax:100,filterMin:0,filterMax:100,currentMin:0,currentMax:100,hasUpdate:!1,wireValues:D.entangle(`filterComponents.${_b}`,!1),defaultMin:_d['minRange'],defaultMax:_d['maxRange'],restrictUpdates:!1,initialiseStyles(){let _A=document.getElementById(_c);_A.style.setProperty('--value-a',this.wireValues['min']??this.filterMin);_A.style.setProperty('--text-value-a',JSON.stringify(this.wireValues['min']??this.filterMin));_A.style.setProperty('--value-b',this.wireValues['max']??this.filterMax);_A.style.setProperty('--text-value-b',JSON.stringify(this.wireValues['max']??this.filterMax))},updateStyles(E,_B){let _C=document.getElementById(_c);_C.style.setProperty('--value-a',E);_C.style.setProperty('--text-value-a',JSON.stringify(E));_C.style.setProperty('--value-b',_B);_C.style.setProperty('--text-value-b',JSON.stringify(_B))},setupWire(){this.wireValues!==void 0?(this.filterMin=this.originalMin=(this.wireValues['min']!==void 0)?this.wireValues['min']:this.defaultMin,this.filterMax=this.originalMax=(this.wireValues['max']!==void 0)?this.wireValues['max']:this.defaultMax):(this.filterMin=this.originalMin=this.defaultMin,this.filterMax=this.originalMax=this.defaultMax);this.updateStyles(this.filterMin,this.filterMax)},allowUpdates(){this.updateWire()},updateWire(){let aA=parseInt(this.filterMin);let aB=parseInt(this.filterMax);if(aA!=this.originalMin||aB!=this.originalMax){aB<aA&&(this.filterMin=aB,this.filterMax=aA);this.hasUpdate=!0;this.originalMin=aA;this.originalMax=aB}this.updateStyles(this.filterMin,this.filterMax)},updateWireable(){this.hasUpdate&&(this.hasUpdate=!1,this.wireValues={'min':this.filterMin,'max':this.filterMax},D.set(`filterComponents.${_b}`,this.wireValues))},init(){this.initialiseStyles();this.setupWire();this.$watch('allFilters',value=>this.setupWire())}}));Alpine.data('flatpickrFilter',(aC,aD,aE,_D,_e)=>({wireValues:aC.entangle(`filterComponents.${aD}`),flatpickrInstance:flatpickr(_D,{mode:'range',altFormat:aE['altFormat']??'F j, Y',altInput:aE['altInput']??!1,allowInput:aE['allowInput']??!1,allowInvalidPreload:!0,ariaDateFormat:aE['ariaDateFormat']??'F j, Y',clickOpens:!0,dateFormat:aE['dateFormat']??'Y-m-d',defaultDate:aE['defaultDate']??null,defaultHour:aE['defaultHour']??12,defaultMinute:aE['defaultMinute']??0,enableTime:aE['enableTime']??!1,enableSeconds:aE['enableSeconds']??!1,hourIncrement:aE['hourIncrement']??1,locale:aE['locale']??'en',minDate:aE['earliestDate']??null,maxDate:aE['latestDate']??null,minuteIncrement:aE['minuteIncrement']??5,shorthandCurrentMonth:aE['shorthandCurrentMonth']??!1,time_24hr:aE['time_24hr']??!1,weekNumbers:aE['weekNumbers']??!1,onOpen:function(){window.childElementOpen=!0},onChange:function(aF,aG,aH){if(aF.length>1){var aI=aG.split(' ')[0],_E=aG.split(' ')[2],f={};window.childElementOpen=window.filterPopoverOpen=!1;f={'minDate':aI,'maxDate':_E};aC.set(`filterComponents.${aD}`,f)}}}),setupWire(){if(this.wireValues!==void 0)if(this.wireValues.minDate!==void 0&&this.wireValues.maxDate!==void 0){this.flatpickrInstance.setDate([this.wireValues.minDate,this.wireValues.maxDate])}else this.flatpickrInstance.setDate([]);else this.flatpickrInstance.setDate([])},init(){this.setupWire();this.$watch('wireValues',value=>this.setupWire())}}));Alpine.data('reorderFunction',(wire,tableID,primaryKeyName)=>({dragging:!1,reorderEnabled:!1,sourceID:'',targetID:'',evenRowClasses:'',oddRowClasses:'',currentlyHighlightedElement:'',evenRowClassArray:{},oddRowClassArray:{},evenNotInOdd:{},oddNotInEven:{},orderedRows:[],defaultReorderColumn:wire.get('defaultReorderColumn'),reorderStatus:wire.get('reorderStatus'),currentlyReorderingStatus:wire.entangle('currentlyReorderingStatus'),hideReorderColumnUnlessReorderingStatus:wire.entangle('hideReorderColumnUnlessReorderingStatus'),reorderDisplayColumn:wire.entangle('reorderDisplayColumn'),dragStart(aJ){this.$nextTick(()=>this.setupEvenOddClasses());this.sourceID=aJ.target.id;aJ.dataTransfer.effectAllowed='move';aJ.dataTransfer.setData('text/plain',aJ.target.id);aJ.target.classList.add('laravel-livewire-tables-dragging')},dragOverEvent(aK){typeof this.currentlyHighlightedElement=='object'&&this.currentlyHighlightedElement.classList.remove('laravel-livewire-tables-highlight-bottom','laravel-livewire-tables-highlight-top');let aL=aK.target.closest('tr');this.currentlyHighlightedElement=aL;aK.offsetY<(aL.getBoundingClientRect().height/2)?(aL.classList.add('laravel-livewire-tables-highlight-top'),aL.classList.remove('laravel-livewire-tables-highlight-bottom')):(aL.classList.remove('laravel-livewire-tables-highlight-top'),aL.classList.add('laravel-livewire-tables-highlight-bottom'))},dragLeaveEvent(aM){aM.target.closest('tr').classList.remove('laravel-livewire-tables-highlight-bottom','laravel-livewire-tables-highlight-top')},dropEvent(aN){typeof this.currentlyHighlightedElement=='object'&&this.currentlyHighlightedElement.classList.remove('laravel-livewire-tables-highlight-bottom','laravel-livewire-tables-highlight-top');let aO=aN.target.closest('tr');let aP=aN.target.closest('tr').parentNode;let aQ=document.getElementById(this.sourceID).closest('tr');aQ.classList.remove('laravel-livewire-table-dragging');let aR=aQ.rowIndex;let F=aO.rowIndex;let g=document.getElementById(tableID);aN.offsetY>(aO.getBoundingClientRect().height/2)?aP.insertBefore(aQ,aO.nextSibling):aP.insertBefore(aQ,aO);F<aR;let h='even';for(let i=1,aS;aS=g.rows[i];i++)if(!aS.classList.contains('hidden')&&!aS.classList.contains('md:hidden'))h==='even'?(aS.classList.remove(...this.oddNotInEven),aS.classList.add(...this.evenNotInOdd),h='odd'):(aS.classList.remove(...this.evenNotInOdd),aS.classList.add(...this.oddNotInEven),h='even')},reorderToggle(){this.$nextTick(()=>this.setupEvenOddClasses());if(this.currentlyReorderingStatus)wire.disableReordering();else{this.setupEvenOddClasses();this.hideReorderColumnUnlessReorderingStatus&&(this.reorderDisplayColumn=!0);wire.enableReordering()}},cancelReorder(){this.hideReorderColumnUnlessReorderingStatus&&(this.reorderDisplayColumn=!1);wire.disableReordering()},updateOrderedItems(){let aT=document.getElementById(tableID);let aU=[];for(let i=1,aV;aV=aT.rows[i];i++)aU.push({[primaryKeyName]:aV.getAttribute('rowpk'),[this.defaultReorderColumn]:i});wire.storeReorder(aU)},setupEvenOddClasses(){if(this.evenNotInOdd.length===void 0||this.evenNotInOdd.length==0||this.oddNotInEven.length===void 0||this.oddNotInEven.length==0){let aW=document.getElementById(tableID).getElementsByTagName('tbody')[0];let aX=[];let aY=[];(aW.rows[0]!==void 0&&aW.rows[1]!==void 0)&&(aX=[...aW.rows[0].classList],aY=[...aW.rows[1].classList],this.evenNotInOdd=aX.filter(aZ=>!aY.includes(aZ)),this.oddNotInEven=aY.filter(bA=>!aX.includes(bA)),aX=[],aY=[])}},init(){}}))});
